{% extends 'base.html' %}
{% load static %}

{% block content %}


    <div class="media mx-5 border-bottom border-secondary">
        <div class="col-auto">
            <img src="{{question.author.avatar.url}}" class="img-fluid rounded" alt="..." >
            {% if user.is_authenticated %}
                <div class="row mt-3">
                    <div class="likes">
                        <button type="button" class="btn btn-sm" data-id="{{ question.id }}" data-type="question" data-action="like" title="Like">
                            <img src="{% static 'img/like.png' %}" width="17px">
                            <span data-count="like">{{ question.likes_count }}</span>
                        </button>

                        <button type="button" class="btn btn-sm" data-id="{{ question.id }}" data-type="question" data-action="dislike" title="Dislike">
                            <img src="{% static 'img/dislike.png' %}" width="17px">
                            <span data-count="dislike">{{ question.dislikes_count }}</span>
                        </button>
                    </div>
                </div>
            {% else %}
                <div class="row mt-3">
                    <div class="likes">
                        <button disabled type="button" class="btn btn-sm">
                            <img src="{% static 'img/like.png' %}" width="17px">
                            <span data-count="like">{{ question.likes_count }}</span>
                        </button>

                        <button disabled type="button" class="btn btn-sm" >
                            <img src="{% static 'img/dislike.png' %}" width="17px">
                            <span data-count="dislike">{{ question.dislikes_count }}</span>
                        </button>
                    </div>
                </div>
            {% endif %}

        </div>
        <div class="col-auto media-body">
            <div class="text-left">
                <h5 class="mt-0">{{ question.title }}</h5>
                <p class="text-secondary">{{question.author.username}}</p>
                <p class="clip text-break" style=" word-wrap: break-word; height: auto; width: auto; text-overflow: ellipsis;">{{ question.question_text }}</p>
            </div>
            <div class="mb-3">
                Tags:
                <span class="mr-2"></span>
                {% for tag in question.tags.all %}
                    <a href="{% url 'ask_me:tag' tag.tag_name %}" class="badge badge-secondary">{{ tag.tag_name }}</a>
                {% endfor %}
                <p class="text-right text-secondary m-0">{{ question.make_time }}</p>
            </div>
        </div>
    </div>

    <div class=" mx-5 border-bottom border-secondary">
        {% if answers %}
            {% for answer in answers %}
                <div class="my-3">
                    {% include 'inc/answer.html' with answer=answer %}
                </div>
            {% endfor %}
            {% include 'inc/pagination.html' with page=answers %}
        {% endif %}
    </div>
    {% if user.is_authenticated %}
        <div class="col-8 my-4 mx-auto">
            <form action="" method="post">
                {% csrf_token %}
                <p>{{ form.answer_text }}</p>
                <p><input class="btn btn-secondary" type="submit" value="Answer"></p>
            </form>
        </div>
    {% endif %}

{% endblock %}

{% block custom_javascript %}
    <script src="{% static 'js/like.js' %}"></script>
{% endblock %}